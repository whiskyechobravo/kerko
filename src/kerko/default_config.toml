# Do NOT edit this file in the context of a Kerko deployment. Applications must
# have their own separate configurations.
#
# Things will break if settings are removed from this file.

[kerko.assets]

bootstrap_version = "4.6.2"
jquery_version = "3.5.1"
popper_version = "1.16.1"
with_jquery = true
with_popper = true

[kerko.features]

download_attachment_new_window = false
download_citations_link = true
download_citations_max_count = 0
open_in_zotero_app = false
open_in_zotero_web = false
print_citations_link = false
print_citations_max_count = 0
print_item_link = false
relations_links = false
relations_initial_limit = 5
relations_sort = "author_asc"
results_abstracts = false
results_abstracts_max_length = 0
results_abstracts_max_length_leeway = 0
results_abstracts_toggler = true
results_attachment_links = true
results_url_links = true

[kerko.feeds]

formats = ["atom"]
fields = ["id", "data"]
max_days = 0
require_any = {}
reject_any = {}

[kerko.meta]

title = "Kerko"
highwirepress_tags = true
google_analytics_id = ""

[kerko.pagination]

page_len = 20
pager_links = 4

[kerko.templates]

base = "kerko/base.html.jinja2"
layout = "kerko/layout.html.jinja2"
search = "kerko/search.html.jinja2"
search_item = "kerko/search-item.html.jinja2"
item = "kerko/item.html.jinja2"
atom_feed = "kerko/atom.xml.jinja2"

[kerko.zotero]

batch_size = 100
max_attempts = 10
wait = 120  # In seconds.

# Changing any of the following will require sync cache --force && sync index.

csl_style = "apa"
locale = "en-US"
item_include_re = ''
item_exclude_re = ''
child_include_re = ''
child_exclude_re = '^_'
attachment_mime_types = ["application/pdf"]
tag_include_re = ''
tag_exclude_re = '^_'

[kerko.search]

result_fields = ["id", "attachments", "bib", "coins", "data", "url"]
fulltext = true         # Changing this will require sync cache --force && sync index.
whoosh_language = "en"  # Changing this will require sync index --force.

[kerko.scopes]

    [kerko.scopes.all]
    enabled = true
    weight = 0

    [kerko.scopes.creator]
    enabled = true
    weight = 100

    [kerko.scopes.title]
    enabled = true
    weight = 200

    [kerko.scopes.metadata]
    enabled = true
    weight = 300

    [kerko.scopes.fulltext]
    enabled = true
    weight = 400

[kerko.search_fields]

    # Changing any search field will require clean index && sync index. Except
    # if you are just disabling the field or changing its 'scopes' parameter.

    # How boost factors are applied:
    # - 200.0 for primary identifiers
    # - 40.0 for secondary identifiers
    # - 20.0 for primary titles
    # - 8.0 for secondary titles and creator names
    # - 4.0 for primary text and other names
    # - 2.0 for secondary text
    # - 1.0 for tertiary text

    #
    # Required fields.
    #

    [kerko.search_fields.core.required.id]
    scopes = ["all", "metadata"]
    boost = 200.0

    [kerko.search_fields.core.required.alternate_id]
    scopes = ["all", "metadata"]
    boost = 200.0

    [kerko.search_fields.core.required.item_type_label]
    scopes = ["all", "metadata"]
    boost = 4.0

    #
    # Optional fields.
    #

    [kerko.search_fields.core.optional.creator]
    enabled = true
    scopes = ["all", "metadata", "creator"]
    boost = 8.0

    [kerko.search_fields.core.optional.collections]
    enabled = true
    scopes = ["all", "metadata"]
    boost = 8.0

    [kerko.search_fields.core.optional.tags]
    enabled = true
    scopes = ["all", "metadata"]
    boost = 8.0

    [kerko.search_fields.core.optional.notes]
    enabled = true
    scopes = ["all", "metadata"]
    boost = 2.0

    [kerko.search_fields.core.optional.documents]
    enabled = true
    scopes = ["all", "fulltext"]
    boost = 1.0

    #
    # Zotero item fields.
    #

    # Notes:
    # - Field keys must match the names of Zotero item fields.
    # - Disabling a field in this section only makes it unsearchable; it does
    #   not prevent Kerko from displaying it, or using it for other purposes.
    # - Note that DOI, ISBN and ISSN are omitted because their values are
    #   already indexed in the 'alternate_id' field.
    # - Known Zotero item fields that we are deliberately ignoring for search:
    #   - accessDate
    #   - codePages
    #   - citationKey
    #   - extra
    #   - firstPage
    #   - numberOfVolumes
    #   - numPages
    #   - pages
    #   - runningTime
    #   - scale
    #   - url
    #   - version

    # Secondary identifiers.

    [kerko.search_fields.zotero.applicationNumber]
    enabled = true
    scopes = ["all", "metadata"]
    analyzer = "id"
    boost = 40.0

    [kerko.search_fields.zotero.billNumber]
    enabled = true
    scopes = ["all", "metadata"]
    analyzer = "id"
    boost = 40.0

    [kerko.search_fields.zotero.callNumber]
    enabled = true
    scopes = ["all", "metadata"]
    analyzer = "id"
    boost = 40.0

    [kerko.search_fields.zotero.codeNumber]
    enabled = true
    scopes = ["all", "metadata"]
    analyzer = "id"
    boost = 40.0

    [kerko.search_fields.zotero.docketNumber]
    enabled = true
    scopes = ["all", "metadata"]
    analyzer = "id"
    boost = 40.0

    [kerko.search_fields.zotero.documentNumber]
    enabled = true
    scopes = ["all", "metadata"]
    analyzer = "id"
    boost = 40.0

    [kerko.search_fields.zotero.patentNumber]
    enabled = true
    scopes = ["all", "metadata"]
    analyzer = "id"
    boost = 40.0

    [kerko.search_fields.zotero.priorityNumbers]
    enabled = true
    scopes = ["all", "metadata"]
    analyzer = "id"
    boost = 40.0

    [kerko.search_fields.zotero.publicLawNumber]
    enabled = true
    scopes = ["all", "metadata"]
    analyzer = "id"
    boost = 40.0

    [kerko.search_fields.zotero.reportNumber]
    enabled = true
    scopes = ["all", "metadata"]
    analyzer = "id"
    boost = 40.0

    # Primary titles.

    [kerko.search_fields.zotero.nameOfAct]
    enabled = true
    scopes = ["all", "metadata", "title"]
    analyzer = "text"
    boost = 20.0

    [kerko.search_fields.zotero.shortTitle]
    enabled = true
    scopes = ["all", "metadata", "title"]
    analyzer = "text"
    boost = 20.0

    [kerko.search_fields.zotero.subject]
    enabled = true
    scopes = ["all", "metadata", "title"]
    analyzer = "text"
    boost = 20.0

    [kerko.search_fields.zotero.title]
    enabled = true
    scopes = ["all", "metadata", "title"]
    analyzer = "text"
    boost = 20.0

    # Container titles.

    [kerko.search_fields.zotero.blogTitle]
    enabled = true
    scopes = ["all", "metadata"]
    analyzer = "text"
    boost = 8.0

    [kerko.search_fields.zotero.bookTitle]
    enabled = true
    scopes = ["all", "metadata"]
    analyzer = "text"
    boost = 8.0

    [kerko.search_fields.zotero.code]
    enabled = true
    scopes = ["all", "metadata"]
    analyzer = "text"
    boost = 8.0

    [kerko.search_fields.zotero.conferenceName]
    enabled = true
    scopes = ["all", "metadata"]
    analyzer = "text"
    boost = 8.0

    [kerko.search_fields.zotero.dictionaryTitle]
    enabled = true
    scopes = ["all", "metadata"]
    analyzer = "text"
    boost = 8.0

    [kerko.search_fields.zotero.encyclopediaTitle]
    enabled = true
    scopes = ["all", "metadata"]
    analyzer = "text"
    boost = 8.0

    [kerko.search_fields.zotero.forumTitle]
    enabled = true
    scopes = ["all", "metadata"]
    analyzer = "text"
    boost = 8.0

    [kerko.search_fields.zotero.meetingName]
    enabled = true
    scopes = ["all", "metadata"]
    analyzer = "text"
    boost = 8.0

    [kerko.search_fields.zotero.proceedingsTitle]
    enabled = true
    scopes = ["all", "metadata"]
    analyzer = "text"
    boost = 8.0

    [kerko.search_fields.zotero.programTitle]
    enabled = true
    scopes = ["all", "metadata"]
    analyzer = "text"
    boost = 8.0

    [kerko.search_fields.zotero.publicationTitle]
    enabled = true
    scopes = ["all", "metadata"]
    analyzer = "text"
    boost = 8.0

    [kerko.search_fields.zotero.section]
    enabled = true
    scopes = ["all", "metadata"]
    analyzer = "text"
    boost = 8.0

    [kerko.search_fields.zotero.series]
    enabled = true
    scopes = ["all", "metadata"]
    analyzer = "text"
    boost = 8.0

    [kerko.search_fields.zotero.seriesTitle]
    enabled = true
    scopes = ["all", "metadata"]
    analyzer = "text"
    boost = 8.0

    [kerko.search_fields.zotero.session]
    enabled = true
    scopes = ["all", "metadata"]
    analyzer = "text"
    boost = 8.0

    [kerko.search_fields.zotero.websiteTitle]
    enabled = true
    scopes = ["all", "metadata"]
    analyzer = "text"
    boost = 8.0

    # Name fields.

    [kerko.search_fields.zotero.archive]
    enabled = true
    scopes = ["all", "metadata"]
    analyzer = "name"
    boost = 4.0

    [kerko.search_fields.zotero.archiveID]
    enabled = true
    scopes = ["all", "metadata"]
    analyzer = "name"
    boost = 4.0

    [kerko.search_fields.zotero.archiveLocation]
    enabled = true
    scopes = ["all", "metadata"]
    analyzer = "name"
    boost = 4.0

    [kerko.search_fields.zotero.assignee]
    enabled = true
    scopes = ["all", "metadata"]
    analyzer = "name"
    boost = 4.0

    [kerko.search_fields.zotero.audioFileType]
    enabled = true
    scopes = ["all", "metadata"]
    analyzer = "name"
    boost = 4.0

    [kerko.search_fields.zotero.audioRecordingFormat]
    enabled = true
    scopes = ["all", "metadata"]
    analyzer = "name"
    boost = 4.0

    [kerko.search_fields.zotero.caseName]
    enabled = true
    scopes = ["all", "metadata"]
    analyzer = "name"
    boost = 4.0

    [kerko.search_fields.zotero.committee]
    enabled = true
    scopes = ["all", "metadata"]
    analyzer = "name"
    boost = 4.0

    [kerko.search_fields.zotero.company]
    enabled = true
    scopes = ["all", "metadata"]
    analyzer = "name"
    boost = 4.0

    [kerko.search_fields.zotero.country]
    enabled = true
    scopes = ["all", "metadata"]
    analyzer = "name"
    boost = 4.0

    [kerko.search_fields.zotero.court]
    enabled = true
    scopes = ["all", "metadata"]
    analyzer = "name"
    boost = 4.0

    [kerko.search_fields.zotero.distributor]
    enabled = true
    scopes = ["all", "metadata"]
    analyzer = "name"
    boost = 4.0

    [kerko.search_fields.zotero.institution]
    enabled = true
    scopes = ["all", "metadata"]
    analyzer = "name"
    boost = 4.0

    [kerko.search_fields.zotero.issuingAuthority]
    enabled = true
    scopes = ["all", "metadata"]
    analyzer = "name"
    boost = 4.0

    [kerko.search_fields.zotero.journalAbbreviation]
    enabled = true
    scopes = ["all", "metadata"]
    analyzer = "name"
    boost = 4.0

    [kerko.search_fields.zotero.label]
    enabled = true
    scopes = ["all", "metadata"]
    analyzer = "name"
    boost = 4.0

    [kerko.search_fields.zotero.legislativeBody]
    enabled = true
    scopes = ["all", "metadata"]
    analyzer = "name"
    boost = 4.0

    [kerko.search_fields.zotero.libraryCatalog]
    enabled = true
    scopes = ["all", "metadata"]
    analyzer = "name"
    boost = 4.0

    [kerko.search_fields.zotero.network]
    enabled = true
    scopes = ["all", "metadata"]
    analyzer = "name"
    boost = 4.0

    [kerko.search_fields.zotero.place]
    enabled = true
    scopes = ["all", "metadata"]
    analyzer = "name"
    boost = 4.0

    [kerko.search_fields.zotero.programmingLanguage]
    enabled = true
    scopes = ["all", "metadata"]
    analyzer = "name"
    boost = 4.0

    [kerko.search_fields.zotero.publisher]
    enabled = true
    scopes = ["all", "metadata"]
    analyzer = "name"
    boost = 4.0

    [kerko.search_fields.zotero.reporter]
    enabled = true
    scopes = ["all", "metadata"]
    analyzer = "name"
    boost = 4.0

    [kerko.search_fields.zotero.studio]
    enabled = true
    scopes = ["all", "metadata"]
    analyzer = "name"
    boost = 4.0

    [kerko.search_fields.zotero.system]
    enabled = true
    scopes = ["all", "metadata"]
    analyzer = "name"
    boost = 4.0

    [kerko.search_fields.zotero.university]
    enabled = true
    scopes = ["all", "metadata"]
    analyzer = "name"
    boost = 4.0

    [kerko.search_fields.zotero.videoRecordingFormat]
    enabled = true
    scopes = ["all", "metadata"]
    analyzer = "name"
    boost = 4.0

    # Date fields.

    [kerko.search_fields.zotero.date]
    enabled = true
    scopes = ["all", "metadata"]
    analyzer = "text"
    boost = 4.0

    [kerko.search_fields.zotero.dateDecided]
    enabled = true
    scopes = ["all", "metadata"]
    analyzer = "text"
    boost = 4.0

    [kerko.search_fields.zotero.dateEnacted]
    enabled = true
    scopes = ["all", "metadata"]
    analyzer = "text"
    boost = 4.0

    [kerko.search_fields.zotero.filingDate]
    enabled = true
    scopes = ["all", "metadata"]
    analyzer = "text"
    boost = 4.0

    [kerko.search_fields.zotero.issueDate]
    enabled = true
    scopes = ["all", "metadata"]
    analyzer = "text"
    boost = 4.0

    # Text fields.

    [kerko.search_fields.zotero.abstractNote]
    enabled = true
    scopes = ["all", "metadata"]
    analyzer = "text"
    boost = 4.0

    [kerko.search_fields.zotero.artworkMedium]
    enabled = true
    scopes = ["all", "metadata"]
    analyzer = "text"
    boost = 4.0

    [kerko.search_fields.zotero.artworkSize]
    enabled = true
    scopes = ["all", "metadata"]
    analyzer = "text"
    boost = 4.0

    [kerko.search_fields.zotero.codeVolume]
    enabled = true
    scopes = ["all", "metadata"]
    analyzer = "text"
    boost = 4.0

    [kerko.search_fields.zotero.edition]
    enabled = true
    scopes = ["all", "metadata"]
    analyzer = "text"
    boost = 4.0

    [kerko.search_fields.zotero.episodeNumber]
    enabled = true
    scopes = ["all", "metadata"]
    analyzer = "text"
    boost = 4.0

    [kerko.search_fields.zotero.extra]
    enabled = true
    scopes = ["all", "metadata"]
    analyzer = "text"
    boost = 4.0

    [kerko.search_fields.zotero.genre]
    enabled = true
    scopes = ["all", "metadata"]
    analyzer = "text"
    boost = 4.0

    [kerko.search_fields.zotero.history]
    enabled = true
    scopes = ["all", "metadata"]
    analyzer = "text"
    boost = 4.0

    [kerko.search_fields.zotero.interviewMedium]
    enabled = true
    scopes = ["all", "metadata"]
    analyzer = "text"
    boost = 4.0

    [kerko.search_fields.zotero.issue]
    enabled = true
    scopes = ["all", "metadata"]
    analyzer = "text"
    boost = 4.0

    [kerko.search_fields.zotero.language]
    enabled = true
    scopes = ["all", "metadata"]
    analyzer = "text"
    boost = 4.0

    [kerko.search_fields.zotero.legalStatus]
    enabled = true
    scopes = ["all", "metadata"]
    analyzer = "text"
    boost = 4.0

    [kerko.search_fields.zotero.letterType]
    enabled = true
    scopes = ["all", "metadata"]
    analyzer = "text"
    boost = 4.0

    [kerko.search_fields.zotero.manuscriptType]
    enabled = true
    scopes = ["all", "metadata"]
    analyzer = "text"
    boost = 4.0

    [kerko.search_fields.zotero.mapType]
    enabled = true
    scopes = ["all", "metadata"]
    analyzer = "text"
    boost = 4.0

    [kerko.search_fields.zotero.postType]
    enabled = true
    scopes = ["all", "metadata"]
    analyzer = "text"
    boost = 4.0

    [kerko.search_fields.zotero.presentationType]
    enabled = true
    scopes = ["all", "metadata"]
    analyzer = "text"
    boost = 4.0

    [kerko.search_fields.zotero.references]
    enabled = true
    scopes = ["all", "metadata"]
    analyzer = "text"
    boost = 4.0

    [kerko.search_fields.zotero.reportType]
    enabled = true
    scopes = ["all", "metadata"]
    analyzer = "text"
    boost = 4.0

    [kerko.search_fields.zotero.reporterVolume]
    enabled = true
    scopes = ["all", "metadata"]
    analyzer = "text"
    boost = 4.0

    [kerko.search_fields.zotero.repository]
    enabled = true
    scopes = ["all", "metadata"]
    analyzer = "text"
    boost = 4.0

    [kerko.search_fields.zotero.rights]
    enabled = true
    scopes = ["all", "metadata"]
    analyzer = "text"
    boost = 4.0

    [kerko.search_fields.zotero.seriesNumber]
    enabled = true
    scopes = ["all", "metadata"]
    analyzer = "text"
    boost = 4.0

    [kerko.search_fields.zotero.seriesText]
    enabled = true
    scopes = ["all", "metadata"]
    analyzer = "text"
    boost = 4.0

    [kerko.search_fields.zotero.thesisType]
    enabled = true
    scopes = ["all", "metadata"]
    analyzer = "text"
    boost = 4.0

    [kerko.search_fields.zotero.versionNumber]
    enabled = true
    scopes = ["all", "metadata"]
    analyzer = "text"
    boost = 4.0

    [kerko.search_fields.zotero.volume]
    enabled = true
    scopes = ["all", "metadata"]
    analyzer = "text"
    boost = 4.0

    [kerko.search_fields.zotero.websiteType]
    enabled = true
    scopes = ["all", "metadata"]
    analyzer = "text"
    boost = 4.0

[kerko.facets]

    # Changing any facet will require clean index && sync index.

    [kerko.facets.tag]
    enabled = true
    type = "tag"
    filter_key = "topic"
    weight = 100
    initial_limit = 0
    initial_limit_leeway = 2
    sort_by = ["label"]
    sort_reverse = false
    item_view = true

    [kerko.facets.item_type]
    enabled = true
    type = "item_type"
    filter_key = "type"
    weight = 200
    initial_limit = 0
    initial_limit_leeway = 2
    sort_by = ["label"]
    sort_reverse = false
    item_view = false

    [kerko.facets.year]
    enabled = true
    type = "year"
    filter_key = "year"
    weight = 300
    initial_limit = 0
    initial_limit_leeway = 2
    sort_by = ["label"]
    sort_reverse = false
    item_view = false

    [kerko.facets.link]
    enabled = false
    type = "link"
    filter_key = "link"
    weight = 400
    sort_by = ["label"]
    sort_reverse = false
    item_view = false

[kerko.sorts]

    [kerko.sorts.score]
    enabled = true
    weight = 0

    [kerko.sorts.date_desc]
    enabled = true
    weight = 10

    [kerko.sorts.date_asc]
    enabled = true
    weight = 11

    [kerko.sorts.author_asc]
    enabled = true
    weight = 20

    [kerko.sorts.author_desc]
    enabled = true
    weight = 21

    [kerko.sorts.title_asc]
    enabled = true
    weight = 30

    [kerko.sorts.title_desc]
    enabled = true
    weight = 31

[kerko.citation_formats]

    [kerko.citation_formats.ris]
    enabled = true
    weight = 10
    extension = "ris"
    mime_type = "application/x-research-info-systems"

    [kerko.citation_formats.bibtex]
    enabled = true
    weight = 20
    extension = "bib"
    mime_type = "application/x-bibtex"

[kerko.relations]

    [kerko.relations.cites]
    enabled = true
    weight = 10

    [kerko.relations.related]
    enabled = true
    weight = 20
